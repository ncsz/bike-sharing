<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bikeshare.ncs.dao.extend.NcsDayUsageExtendMapper">
    <select id="selectMonthDataByYear"  resultType="com.bikeshare.ncs.bean.extend.NcsDayUsageExtend">
        SELECT d.month, SUM(h.register_usage) registerUsage,SUM(h.unregister_usage) unregisterUsage,SUM(h.total_usage) totalUsage
        FROM ncs_day_usage h,ncs_day d,ncs_region r WHERE h.region_id=r.id AND h.day_id=d.id AND r.id=#{id,jdbcType=BIGINT} AND
        d.year=#{year,jdbcType=CHAR}
        GROUP BY d.month;
    </select>
<!--    <resultMap id="NcsDayUsageExtendResultMap" type="com.bikeshare.ncs.bean.extend.NcsDayUsageExtend">-->
<!--        &lt;!&ndash;-->
<!--          WARNING - @mbg.generated-->
<!--          This element is automatically generated by MyBatis Generator, do not modify.-->
<!--          This element was generated on Sat Apr 18 21:43:16 CST 2020.-->
<!--        &ndash;&gt;-->
<!--        <result property="registerUsage" column="register_usage"/>-->
<!--        <result property="unregisterUsage" column="unregister_usage"/>-->
<!--        <result property="totalUsage" column="total_usage"/>-->
<!--        <collection property="day" column="year" select="com.bikeshare.ncs.dao.NcsDayMapper.selectByExample"/>-->
<!--    </resultMap>-->
    </mapper>
